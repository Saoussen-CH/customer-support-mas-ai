%% Order Agent Architecture
%% Google Cloud Platform Style

graph TB
    subgraph "Order Agent"
        Agent[ðŸ“¦ Order Agent<br/>Model: Gemini 2.5 Flash<br/>Callback: auto_save_to_memory_explicit]
    end

    subgraph "Tools"
        T0[PreloadMemoryTool<br/>Load user memories]
        T1[track_order<br/>Track specific order]
        T2[get_my_order_history<br/>Authenticated user orders]
    end

    subgraph "Data Sources"
        Firestore[(Firestore<br/>Orders Collection)]
        Memory[(Memory Bank)]
    end

    Agent --> T0
    Agent --> T1
    Agent --> T2

    T0 --> Memory
    T1 --> Firestore
    T2 --> Firestore

    style Agent fill:#FBBC04,stroke:#F29900,color:#000,stroke-width:3px
    style T0 fill:#9334E6,stroke:#7627BB,color:#fff
    style T1 fill:#4285F4,stroke:#1967D2,color:#fff
    style T2 fill:#4285F4,stroke:#1967D2,color:#fff
    style Firestore fill:#FF6F00,stroke:#E65100,color:#fff
    style Memory fill:#9334E6,stroke:#7627BB,color:#fff
