%% Multi-Agent Hierarchy - Agent Structure
%% Google Cloud Platform Style

graph TD
    subgraph "Root Layer"
        Root[üéØ Root Agent<br/>Model: Gemini 2.5 Pro<br/>Role: Coordinator & Router<br/>Error Handling: Always respond to user]
    end

    subgraph "Domain Specialists"
        Product[üõçÔ∏è Product Agent<br/>Model: Gemini 2.5 Flash<br/>Tools: 8<br/>‚Ä¢ PreloadMemoryTool<br/>‚Ä¢ search_products RAG<br/>‚Ä¢ get_product_info default<br/>‚Ä¢ get_all_saved_products_info multi]

        Order[üì¶ Order Agent<br/>Model: Gemini 2.5 Flash<br/>Tools: 3<br/>‚Ä¢ PreloadMemoryTool<br/>‚Ä¢ track_order<br/>‚Ä¢ get_my_order_history]

        Billing[üí≥ Billing Agent<br/>Model: Gemini 2.5 Flash<br/>Tools: 4<br/>‚Ä¢ PreloadMemoryTool<br/>‚Ä¢ get_invoice<br/>‚Ä¢ get_invoice_by_order_id<br/>‚Ä¢ check_payment_status<br/>Note: Refunds via refund_workflow only]
    end

    subgraph "Workflow Patterns"
        Sequential[üîÑ Sequential Workflow<br/>Model: Gemini 2.5 Pro<br/>Refund Process with Validation Gates<br/>ONLY way to process refunds]

        subgraph "Sequential Steps"
            S1[1Ô∏è‚É£ Order Validator<br/>Gemini 2.5 Flash]
            S2[2Ô∏è‚É£ Eligibility Checker<br/>Gemini 2.5 Flash]
            S3[3Ô∏è‚É£ Refund Processor<br/>Gemini 2.5 Flash]
        end
    end

    Root -->|Products Query| Product
    Root -->|Orders Query| Order
    Root -->|Billing Query| Billing
    Root -->|Refund Request| Sequential

    Sequential --> S1
    S1 -->|‚úÖ Valid| S2
    S2 -->|‚úÖ Eligible| S3
    S3 -->|‚úÖ Success| Root

    S1 -.->|‚ùå Invalid| Root
    S2 -.->|‚ùå Not Eligible| Root

    style Root fill:#34A853,stroke:#0D652D,color:#fff,stroke-width:3px
    style Product fill:#FBBC04,stroke:#F29900,color:#000,stroke-width:2px
    style Order fill:#FBBC04,stroke:#F29900,color:#000,stroke-width:2px
    style Billing fill:#FBBC04,stroke:#F29900,color:#000,stroke-width:2px
    style Sequential fill:#EA4335,stroke:#C5221F,color:#fff,stroke-width:2px
    style S1 fill:#FFB6C1,stroke:#EA4335,color:#000
    style S2 fill:#FFB6C1,stroke:#EA4335,color:#000
    style S3 fill:#FFB6C1,stroke:#EA4335,color:#000
